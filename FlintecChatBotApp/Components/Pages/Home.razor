@page "/"
@inject IJSRuntime JSRuntime
@using FlintecChatBotApp.Components.Models;
@using System.Linq;

<div>
    <h3>Flintec</h3>
</div>


<div>
    <div>


        @if (messages.Count > 0)
        {
            <p>No: @messages.Count</p>



            @foreach (var item in messages.Select((message, index) => new { message, index }))
            {
                <p>@item.message</p>
                <button onclick="userAccountConversation.EditMessage(@item.index)">Edit</button>
            }
        }


        else
        {

            <p>@messages.Count()</p>
        }
    </div>


<div class="inputArea">
    <div class="inputWrapper">
            <textarea type="text" id="auto-resize-textarea" class="inputBar" @bind="userQuestion" placeholder="Type your message here..." @onkeypress="EnterKeyPressed" />
            <button class="sendButton" @onclick="UserSubmitQuestion">Send</button>
    </div>

    <div class="contactTextContainer">
        <p class="contactText">Contact the company for more details</p>
    </div>
</div>


</div>



<button @onclick="() => CreateNewConversation()">New tab</button>




@foreach (var dict in userConversation.conversations.Select((message, listindex) => new { message, listindex }))
{
    <div>
        <button @onclick="() => GetConversation(dict.listindex)">Get</button>
        <button @onclick="() => userConversation.DeleteConversation(dict.listindex)">Delete</button>
          <!-- <span>Conversation {dict.listindex}</span> --> 
    </div>
}

<h1>////</h1>

@foreach (var conversation in userConversation.conversations)
{
    // Initialize an empty string for the messages
    string messageLine = "";

    foreach (var message in conversation)
    {
        messageLine += message + " "; // Concatenate each message with a space
    }

    // Display the concatenated messages
    <p>@messageLine</p>
}



